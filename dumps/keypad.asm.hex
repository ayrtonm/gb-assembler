00000000  74 69 74 6c 65 3a 0a 6b  65 79 70 61 64 20 74 65  |title:.keypad te|
00000010  73 74 0a 0a 73 74 61 72  74 3a 0a 6a 70 20 30 78  |st..start:.jp 0x|
00000020  30 31 35 30 0a 0a 30 78  30 31 35 30 3a 0a 2f 2f  |0150..0x0150:.//|
00000030  6c 6f 61 64 20 73 70 72  69 74 65 20 74 69 6c 65  |load sprite tile|
00000040  20 64 61 74 61 0a 6c 64  20 24 68 6c 20 30 78 38  | data.ld $hl 0x8|
00000050  30 30 32 0a 6c 64 20 5b  68 6c 5d 20 30 78 33 63  |002.ld [hl] 0x3c|
00000060  0a 69 6e 63 20 24 68 6c  0a 69 6e 63 20 24 68 6c  |.inc $hl.inc $hl|
00000070  0a 6c 64 20 5b 68 6c 5d  20 30 78 36 36 0a 69 6e  |.ld [hl] 0x66.in|
00000080  63 20 24 68 6c 0a 6c 64  20 5b 68 6c 5d 20 30 78  |c $hl.ld [hl] 0x|
00000090  31 38 0a 69 6e 63 20 24  68 6c 0a 6c 64 20 5b 68  |18.inc $hl.ld [h|
000000a0  6c 5d 20 30 78 34 61 0a  69 6e 63 20 24 68 6c 0a  |l] 0x4a.inc $hl.|
000000b0  6c 64 20 5b 68 6c 5d 20  30 78 33 63 0a 69 6e 63  |ld [hl] 0x3c.inc|
000000c0  20 24 68 6c 0a 6c 64 20  5b 68 6c 5d 20 30 78 34  | $hl.ld [hl] 0x4|
000000d0  32 0a 69 6e 63 20 24 68  6c 0a 6c 64 20 5b 68 6c  |2.inc $hl.ld [hl|
000000e0  5d 20 30 78 33 63 0a 69  6e 63 20 24 68 6c 0a 6c  |] 0x3c.inc $hl.l|
000000f0  64 20 5b 68 6c 5d 20 30  78 36 36 0a 69 6e 63 20  |d [hl] 0x66.inc |
00000100  24 68 6c 0a 6c 64 20 5b  68 6c 5d 20 30 78 31 38  |$hl.ld [hl] 0x18|
00000110  0a 69 6e 63 20 24 68 6c  0a 6c 64 20 5b 68 6c 5d  |.inc $hl.ld [hl]|
00000120  20 30 78 33 63 0a 2f 2f  6c 6f 61 64 20 73 70 72  | 0x3c.//load spr|
00000130  69 74 65 20 74 69 6c 65  20 64 61 74 61 0a 6c 64  |ite tile data.ld|
00000140  20 24 68 6c 20 30 78 38  30 31 32 0a 6c 64 20 5b  | $hl 0x8012.ld [|
00000150  68 6c 5d 20 30 78 33 63  0a 69 6e 63 20 24 68 6c  |hl] 0x3c.inc $hl|
00000160  0a 69 6e 63 20 24 68 6c  0a 6c 64 20 5b 68 6c 5d  |.inc $hl.ld [hl]|
00000170  20 30 78 36 36 0a 69 6e  63 20 24 68 6c 0a 6c 64  | 0x66.inc $hl.ld|
00000180  20 5b 68 6c 5d 20 30 78  31 38 0a 69 6e 63 20 24  | [hl] 0x18.inc $|
00000190  68 6c 0a 6c 64 20 5b 68  6c 5d 20 30 78 34 61 0a  |hl.ld [hl] 0x4a.|
000001a0  69 6e 63 20 24 68 6c 0a  6c 64 20 5b 68 6c 5d 20  |inc $hl.ld [hl] |
000001b0  30 78 33 63 0a 69 6e 63  20 24 68 6c 0a 6c 64 20  |0x3c.inc $hl.ld |
000001c0  5b 68 6c 5d 20 30 78 34  32 0a 69 6e 63 20 24 68  |[hl] 0x42.inc $h|
000001d0  6c 0a 6c 64 20 5b 68 6c  5d 20 30 78 33 63 0a 69  |l.ld [hl] 0x3c.i|
000001e0  6e 63 20 24 68 6c 0a 6c  64 20 5b 68 6c 5d 20 30  |nc $hl.ld [hl] 0|
000001f0  78 36 36 0a 69 6e 63 20  24 68 6c 0a 6c 64 20 5b  |x66.inc $hl.ld [|
00000200  68 6c 5d 20 30 78 31 38  0a 69 6e 63 20 24 68 6c  |hl] 0x18.inc $hl|
00000210  0a 6c 64 20 5b 68 6c 5d  20 30 78 33 63 0a 0a 2f  |.ld [hl] 0x3c../|
00000220  2f 6c 6f 61 64 20 70 61  6c 65 74 74 65 20 28 6f  |/load palette (o|
00000230  62 70 30 29 0a 6c 64 20  24 68 6c 20 30 78 66 66  |bp0).ld $hl 0xff|
00000240  34 38 0a 6c 64 20 5b 68  6c 5d 20 30 78 31 62 0a  |48.ld [hl] 0x1b.|
00000250  0a 2f 2f 64 69 73 61 62  6c 65 20 62 6b 67 2c 20  |.//disable bkg, |
00000260  77 69 6e 2f 65 6e 61 62  6c 65 20 73 70 72 69 74  |win/enable sprit|
00000270  65 73 0a 6c 64 20 24 68  6c 20 30 78 66 66 34 30  |es.ld $hl 0xff40|
00000280  0a 6c 64 20 5b 68 6c 5d  20 30 78 38 36 0a 2f 2f  |.ld [hl] 0x86.//|
00000290  73 65 6c 65 63 74 20 64  69 72 65 63 74 69 6f 6e  |select direction|
000002a0  20 6b 65 79 73 0a 6c 64  20 24 68 6c 20 30 78 66  | keys.ld $hl 0xf|
000002b0  66 30 30 0a 6c 64 20 5b  68 6c 5d 20 30 78 32 30  |f00.ld [hl] 0x20|
000002c0  0a 0a 2f 2f 73 65 74 20  38 78 38 20 73 70 72 69  |..//set 8x8 spri|
000002d0  74 65 73 0a 6c 64 20 24  68 6c 20 30 78 66 66 34  |tes.ld $hl 0xff4|
000002e0  30 0a 6c 64 20 24 61 20  5b 68 6c 5d 0a 2f 2f 75  |0.ld $a [hl].//u|
000002f0  73 65 64 20 74 6f 20 63  6c 65 61 72 20 33 72 64  |sed to clear 3rd|
00000300  20 62 69 74 20 6f 66 20  5b 30 78 66 66 34 30 5d  | bit of [0xff40]|
00000310  0a 2f 2f 6c 64 20 24 62  20 30 78 66 62 0a 2f 2f  |.//ld $b 0xfb.//|
00000320  61 6e 64 20 24 62 0a 2f  2f 75 73 65 64 20 74 6f  |and $b.//used to|
00000330  20 73 65 74 20 33 72 64  20 62 69 74 20 6f 66 20  | set 3rd bit of |
00000340  5b 30 78 66 66 34 30 5d  0a 6c 64 20 24 62 20 30  |[0xff40].ld $b 0|
00000350  78 30 34 0a 6f 72 20 24  62 0a 6c 64 20 5b 68 6c  |x04.or $b.ld [hl|
00000360  5d 20 24 61 0a 0a 2f 2f  69 6e 69 74 69 61 6c 20  |] $a..//initial |
00000370  73 70 72 69 74 65 20 78  20 63 6f 6f 72 64 69 6e  |sprite x coordin|
00000380  61 74 65 0a 6c 64 20 24  62 20 30 78 31 30 0a 2f  |ate.ld $b 0x10./|
00000390  2f 69 6e 63 72 65 6d 65  6e 74 20 78 20 63 6f 6f  |/increment x coo|
000003a0  72 64 69 6e 61 74 65 20  62 79 20 24 63 20 69 66  |rdinate by $c if|
000003b0  20 72 69 67 68 74 20 62  75 74 74 6f 6e 20 69 73  | right button is|
000003c0  20 6e 6f 74 20 70 72 65  73 73 65 64 0a 6c 64 20  | not pressed.ld |
000003d0  24 63 20 30 78 30 31 0a  2f 2f 69 6e 69 74 69 61  |$c 0x01.//initia|
000003e0  6c 20 73 70 72 69 74 65  20 79 20 63 6f 6f 72 64  |l sprite y coord|
000003f0  69 6e 61 74 65 0a 6c 64  20 24 64 20 30 78 31 30  |inate.ld $d 0x10|
00000400  0a 2f 2f 69 6e 63 72 65  6d 65 6e 74 20 79 20 63  |.//increment y c|
00000410  6f 6f 72 64 69 6e 61 74  65 20 62 79 20 24 65 20  |oordinate by $e |
00000420  69 66 20 42 20 62 75 74  74 6f 6e 20 69 73 20 6e  |if B button is n|
00000430  6f 74 20 70 72 65 73 73  65 64 0a 6c 64 20 24 65  |ot pressed.ld $e|
00000440  20 30 78 30 31 0a 6a 70  20 30 78 31 30 30 30 0a  | 0x01.jp 0x1000.|
00000450  0a 30 78 31 30 30 30 3a  0a 6c 64 20 24 68 6c 20  |.0x1000:.ld $hl |
00000460  30 78 66 65 30 30 0a 2f  2f 73 65 74 20 73 70 72  |0xfe00.//set spr|
00000470  69 74 65 27 73 20 79 20  63 6f 6f 72 64 69 6e 61  |ite's y coordina|
00000480  74 65 0a 6c 64 20 5b 68  6c 5d 20 24 64 0a 69 6e  |te.ld [hl] $d.in|
00000490  63 20 24 68 6c 0a 2f 2f  73 65 74 20 73 70 72 69  |c $hl.//set spri|
000004a0  74 65 27 73 20 78 20 63  6f 6f 72 64 69 6e 61 74  |te's x coordinat|
000004b0  65 0a 6c 64 20 5b 68 6c  5d 20 24 62 0a 0a 2f 2f  |e.ld [hl] $b..//|
000004c0  73 65 65 20 69 66 20 72  69 67 68 74 20 62 75 74  |see if right but|
000004d0  74 6f 6e 20 69 73 20 70  75 73 68 65 64 20 64 6f  |ton is pushed do|
000004e0  77 6e 0a 6c 64 20 24 68  6c 20 30 78 66 66 30 30  |wn.ld $hl 0xff00|
000004f0  0a 6c 64 20 5b 68 6c 5d  20 30 78 32 30 0a 6c 64  |.ld [hl] 0x20.ld|
00000500  20 24 61 20 30 78 30 31  0a 61 6e 64 20 5b 68 6c  | $a 0x01.and [hl|
00000510  5d 0a 6a 70 6e 7a 20 30  78 32 30 30 30 0a 6c 64  |].jpnz 0x2000.ld|
00000520  20 24 61 20 30 78 30 30  0a 61 64 64 20 24 62 0a  | $a 0x00.add $b.|
00000530  61 64 64 20 24 63 0a 6c  64 20 24 62 20 24 61 0a  |add $c.ld $b $a.|
00000540  63 61 6c 6c 20 30 78 34  30 30 30 0a 6a 70 20 30  |call 0x4000.jp 0|
00000550  78 32 30 30 30 0a 0a 30  78 32 30 30 30 3a 0a 2f  |x2000..0x2000:./|
00000560  2f 73 65 65 20 69 66 20  42 20 62 75 74 74 6f 6e  |/see if B button|
00000570  20 69 73 20 70 75 73 68  65 64 20 64 6f 77 6e 0a  | is pushed down.|
00000580  6c 64 20 24 68 6c 20 30  78 66 66 30 30 0a 6c 64  |ld $hl 0xff00.ld|
00000590  20 5b 68 6c 5d 20 30 78  31 30 0a 6c 64 20 24 61  | [hl] 0x10.ld $a|
000005a0  20 30 78 30 32 0a 61 6e  64 20 5b 68 6c 5d 0a 6a  | 0x02.and [hl].j|
000005b0  70 6e 7a 20 30 78 31 30  30 30 0a 6c 64 20 24 61  |pnz 0x1000.ld $a|
000005c0  20 30 78 30 30 0a 61 64  64 20 24 64 0a 61 64 64  | 0x00.add $d.add|
000005d0  20 24 65 0a 6c 64 20 24  64 20 24 61 0a 63 61 6c  | $e.ld $d $a.cal|
000005e0  6c 20 30 78 34 30 30 30  0a 0a 6a 70 20 30 78 31  |l 0x4000..jp 0x1|
000005f0  30 30 30 0a 0a 2f 2f 63  61 6c 6c 69 6e 67 20 30  |000..//calling 0|
00000600  78 32 30 30 30 20 69 73  20 61 20 76 65 72 79 20  |x2000 is a very |
00000610  72 75 64 69 6d 65 6e 74  61 72 79 20 77 61 69 74  |rudimentary wait|
00000620  20 66 75 6e 63 74 69 6f  6e 0a 2f 2f 74 68 69 73  | function.//this|
00000630  20 77 6f 72 6b 73 20 62  79 20 72 75 6e 6e 69 6e  | works by runnin|
00000640  67 20 6e 6f 70 20 75 6e  74 69 6c 20 74 68 65 20  |g nop until the |
00000650  72 65 74 75 72 6e 20 73  74 61 74 65 6d 65 6e 74  |return statement|
00000660  20 62 65 6c 6f 77 20 69  73 20 65 78 65 63 75 74  | below is execut|
00000670  65 64 0a 2f 2f 65 78 70  6c 69 63 69 74 6c 79 20  |ed.//explicitly |
00000680  77 72 69 74 69 6e 67 20  30 78 30 30 20 74 6f 20  |writing 0x00 to |
00000690  30 78 32 30 30 30 20 66  6f 72 20 63 6c 61 72 69  |0x2000 for clari|
000006a0  74 79 20 0a 2f 2f 61 20  62 65 74 74 65 72 20 77  |ty .//a better w|
000006b0  61 79 20 74 6f 20 69 6d  70 6c 65 6d 65 6e 74 20  |ay to implement |
000006c0  77 61 69 74 20 77 6f 75  6c 64 20 62 65 20 74 6f  |wait would be to|
000006d0  20 75 73 65 20 61 20 72  65 67 69 73 74 65 72 20  | use a register |
000006e0  61 73 20 61 20 63 6f 75  6e 74 65 72 20 66 6f 72  |as a counter for|
000006f0  20 61 20 6c 6f 6f 70 0a  2f 2f 74 68 61 74 20 77  | a loop.//that w|
00000700  61 79 20 74 68 65 20 6d  61 78 69 6d 75 6d 20 74  |ay the maximum t|
00000710  69 6d 65 20 64 65 6c 61  79 20 77 6f 6e 27 74 20  |ime delay won't |
00000720  62 65 20 6c 69 6d 69 74  65 64 20 62 79 20 6d 65  |be limited by me|
00000730  6d 6f 72 79 20 6f 72 20  6d 61 78 69 6d 75 6d 20  |mory or maximum |
00000740  63 61 6c 6c 20 73 74 61  63 6b 20 28 69 66 20 74  |call stack (if t|
00000750  68 65 72 65 20 69 73 20  6f 6e 65 3f 29 0a 2f 2f  |here is one?).//|
00000760  31 30 30 30 20 6e 6f 70  73 20 69 73 20 61 70 70  |1000 nops is app|
00000770  72 6f 78 20 32 35 30 75  73 20 64 65 6c 61 79 0a  |rox 250us delay.|
00000780  30 78 34 30 30 30 3a 0a  6e 6f 70 0a 30 78 35 30  |0x4000:.nop.0x50|
00000790  30 30 3a 0a 72 65 74 0a  0a 2f 2f 2f 30 78 30 30  |00:.ret..///0x00|
000007a0  30 30 3a 0a 2f 2f 6c 64  20 24 68 6c 20 30 78 66  |00:.//ld $hl 0xf|
000007b0  66 34 34 0a 2f 2f 6c 64  20 24 61 20 5b 68 6c 5d  |f44.//ld $a [hl]|
000007c0  0a 2f 2f 6c 64 20 24 62  20 30 78 39 31 0a 2f 2f  |.//ld $b 0x91.//|
000007d0  63 70 20 24 62 0a 2f 2f  6a 70 6e 7a 20 30 78 30  |cp $b.//jpnz 0x0|
000007e0  30 30 30 0a 2f 2f 6c 64  20 24 68 6c 20 30 78 66  |000.//ld $hl 0xf|
000007f0  66 34 30 0a 2f 2f 6c 64  20 5b 68 6c 5d 20 30 78  |f40.//ld [hl] 0x|
00000800  30 36 0a 2f 2f 72 65 74  0a                       |06.//ret.|
00000809
